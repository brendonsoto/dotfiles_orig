:elixir:phoenix:

# Overview
Phoenix is a web development framework for the Elixir language.

Connections are represented by *structs* (See _Plugs_ below)

Layers of Phoenix are represented by *pipelines* which are series of functions chained together

The layers can be summarized into the following (order is intentional):
- endpoint: the point of contact/interface between the url and the app
- router: directs the endpoint where to go
- pipelines: any necessary transformations
- controller: final say of what to do

Controllers have their own pipeline:
- controller
- common_services
- action

Think of the entire process as _a series of functions_ to transform data

Common services consists of *Plugs*
These come from the Plug *library*
Think of each *plug* as a function that consumes and produces the `Plug.Conn` structure which represents a whole *request*

The project structure looks like a mix project
The meat of your source code lives in a `lib` directory
There's a directory for your *controllers* and *views* and a file for *routing*


# Prerequisites
Phoenix needs the following:
- Elixir/Erlang
- PostgreSQL
- NodeJS


# Installing Phoenix
`mix archive.install hex phx_new`


# Creating a New Phoenix App
Run `phx.new <project_name>` to create a foundation in a directory called whatever `<project_name>` is
The output will tell you the next steps, but in case that changes it's:
- `mix ecto.create`: sets up the DB connection config
- `mix phx.server`: runs the server on port 4000 (by default)


# File Structure
This won't go over the whole structure since some things you are already familiar with or can guess, like _assets_ or _config_
This is to talk about different things

The `lib` directory has your elixir files into two main categories:
- `lib/<project_name>`
- `lib/<project_name>_web`
Notice the addition of `_web` in the second part
The non `_web` directory is for long running processes and application logic
The `*_web` directory is for MVC related files (models, views, templates)


# Switching Environments
Use the environment variable `MIX_ENV` to change whether to be in _dev_, _test_, or _prod_


# Templates vs Views
A *view* is a module containing functions to transform your data into the output that the user/consumer expects (html/json/etc)

A *template* is a function on the view module that takes raw markup and processes any loops/substitutions

view for rendering
templates for fragments

Templates live in views
So think of the view as a module where the functions in it are templates

# The *_web.ex File
This file should be kept light
Why?
Because these functions are used by other controllers/views/etc
You can see each function uses the `quote` and `unquote` functions which tells us that some code is being injected everytime that function is used

# Security
By default the HTML generated by Phoenix is safe and protects against XSS
See `Phoenix.HTML` for more
